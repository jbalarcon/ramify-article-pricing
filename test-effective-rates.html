<!DOCTYPE html>
<html>
<head>
    <title>Test Effective Rates and Updated Tables</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .info {
            color: #0EA5E9;
            font-weight: bold;
        }
        iframe {
            width: 100%;
            height: 900px;
            border: 1px solid #ccc;
            margin-top: 20px;
        }
        .feature-check {
            margin: 10px 0;
            padding: 10px;
            background: #f5f5f5;
            border-left: 4px solid #0EA5E9;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <h1>Test Effective Rates (€/Mot) and Updated Tables</h1>
    
    <div class="test-section">
        <h2>Changes Implemented</h2>
        
        <div class="feature-check">
            <h3>✓ Restored Effective Rate (Cost per Word)</h3>
            <ul>
                <li>Added "€/Mot" columns to both Référence and Simulation sections</li>
                <li>Shows the actual cost per word for each writer</li>
                <li>Helps understand the real pricing rate after all models are applied</li>
            </ul>
        </div>
        
        <div class="feature-check">
            <h3>✓ Simplified Column Headers</h3>
            <ul>
                <li>Removed redundant "Coût" from sub-headers</li>
                <li>Headers now simply show: Moyen, Médian, Total, €/Mot</li>
                <li>Cleaner and more readable</li>
            </ul>
        </div>
        
        <div class="feature-check">
            <h3>✓ Updated Table Structure</h3>
            <table>
                <thead>
                    <tr>
                        <th rowspan="2">Rédacteur</th>
                        <th colspan="4" style="background: linear-gradient(135deg, #E0F2FE, #BAE6FD); color: #075985;">Tarification de Référence</th>
                        <th colspan="4" style="background: linear-gradient(135deg, #FEF3C7, #FDE68A); color: #92400E;">Nouvelle Tarification</th>
                        <th colspan="2" style="background: linear-gradient(135deg, #F3F4F6, #E5E7EB); color: #1F2937;">Impact</th>
                    </tr>
                    <tr>
                        <th>Moyen</th>
                        <th>Médian</th>
                        <th>Total</th>
                        <th>€/Mot</th>
                        <th>Moyen</th>
                        <th>Médian</th>
                        <th>Total</th>
                        <th>€/Mot</th>
                        <th>Diff (%)</th>
                        <th>Économies</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Example Writer</td>
                        <td>156.00 €</td>
                        <td>150.00 €</td>
                        <td>780.00 €</td>
                        <td class="info">0.1300 €</td>
                        <td>140.40 €</td>
                        <td>135.00 €</td>
                        <td>702.00 €</td>
                        <td class="info">0.1170 €</td>
                        <td class="success">-10.0%</td>
                        <td class="success">-78.00 €</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Testing Steps</h2>
        <ol>
            <li>Load the application below</li>
            <li>Upload the sample-data.csv file</li>
            <li>Verify the cost comparison table now has 11 columns (was 9)</li>
            <li>Check that €/Mot columns show the effective rate per word</li>
            <li>Verify headers no longer repeat "Coût"</li>
            <li>Test sorting on the new €/Mot columns</li>
            <li>Compare €/Mot values: they should equal Total Cost ÷ Total Words for each writer</li>
        </ol>
    </div>
    
    <div class="test-section">
        <h2>Calculation Verification</h2>
        <p>The €/Mot (effective rate) should be calculated as:</p>
        <ul>
            <li><strong>Référence €/Mot</strong> = Total Référence Cost ÷ Total Words for Writer</li>
            <li><strong>Simulation €/Mot</strong> = Total Simulation Cost ÷ Total Words for Writer</li>
        </ul>
        <p>This shows the actual cost per word after all pricing models and bonuses are applied.</p>
    </div>
    
    <div class="test-section">
        <h2>Application Preview</h2>
        <iframe src="index.html"></iframe>
    </div>
    
    <div class="test-section">
        <h2>Manual Verification Checklist</h2>
        <ul>
            <li>☐ €/Mot columns are visible in both Référence and Simulation sections</li>
            <li>☐ €/Mot values are calculated correctly (Total Cost ÷ Total Words)</li>
            <li>☐ Headers no longer show redundant "Coût"</li>
            <li>☐ Sorting works on €/Mot columns</li>
            <li>☐ Visual borders correctly separate the three sections</li>
            <li>☐ All 11 columns display properly without horizontal scrolling (on wide screens)</li>
            <li>☐ No JavaScript errors in console</li>
        </ul>
    </div>
</body>
</html>